name: pyapi-demo
on:
    push: 
       paths:
         - ".github/workflows/demopy.yml"
         - "demoapp/**"
    workflow_dispatch: #manualrun
jobs:
   build:
      name: build-python-api
      runs-on: ubuntu-latest
      steps:
        - uses: actions/checkout@v4
        - run: pip install flask
        - run: python --version
        - run: python demoapp.py
          working-directory: ./demoapp
        - run: | #exit after 30sec
            sleep 30
            exit 0 